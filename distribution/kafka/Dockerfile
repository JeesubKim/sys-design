# 공식 Confluent Kafka 이미지 사용
FROM confluentinc/cp-kafka:latest

# Zookeeper 주소 환경 변수 설정 (Kafka와 Zookeeper 연결)
ENV KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181

# Kafka 설정 (필요시)
ENV KAFKA_LISTENER_SECURITY_PROTOCOL=PLAINTEXT
ENV KAFKA_LISTENER_NAME_INTERNAL=INTERNAL
ENV KAFKA_LISTENER_NAME_EXTERNAL=EXTERNAL
ENV KAFKA_LISTENERS=INTERNAL://0.0.0.0:9093,EXTERNAL://0.0.0.0:9092
ENV KAFKA_ADVERTISED_LISTENERS=INTERNAL://kafka:9093,EXTERNAL://localhost:9092
ENV KAFKA_LISTENER_INTERNAL_PORT=9093
ENV KAFKA_LISTENER_SECURITY_PROTOCOL_INTERNAL=PLAINTEXT
ENV KAFKA_LISTENER_SECURITY_PROTOCOL_EXTERNAL=PLAINTEXT
# Kafka 실행
CMD ["bash", "-c", "echo 'Starting Kafka...'; /etc/confluent/docker/run"]